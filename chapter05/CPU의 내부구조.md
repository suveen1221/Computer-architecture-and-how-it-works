---

CPU는 기본적으로 연산장치,레지스터,제어장치의 집합으로 구성되며, 이들은 내부 CPU버스로 연결되어 있다. 그리고 데이터들은 버스를 통해서 전송된다.

1.연산장치에서 각종 연산 기능을 수행한다.

2.레지스터에서 데이터를 보관하는 기억 기능을 수행한다.

3.제어장치는 명령을 해독하고 제어신호를 발생하여 제어 기능을 수행한다.

4.버스를 통해서 데이터의 전달 기능을 수행한다.

---
### 연산장치
컴퓨터 CPU 내의 연산장치를 산술논리연산장치라고 한다. 이 장치는 덧셈,뺄셈과 같은 산술연산과 AND,OR,XOR 등의 논리연산을 계산하는 CPU의 기본 설계 블록이다. 현대의 컴퓨터가 멀티미디어와 같은 복잡하고 많은 데이터를 처리 할 수 있눈 것은 마이크로프로세서가 강력하고 복잡한 다중의 산술논리연산장치를 가지고 있기 때문이다.

- 산술기 및 부울 논리 연산기: 실제적인 산술연산(덧셈,뺄셈,곱셈,나눗셈)과 논리연산(AND,OR,NOR,XOR)을 수행하는 회로다.
- 상태 플래그: 연산 중인 ALU 내의 데이터 상태를 음수,0,오버플로우 등을 표시한다.
- 이동기: 데이터 비트를 좌우로 비트별로 이동시킨다. 비트의 이동은 2로 곰셈하거나 나눗셈하는 것으로 해석된다.
- 보수기: ALU내의 데이터에 대하여 보수 연산을 수행한다. 2의 보수가 덧셈과 뺄셈 계산장치를 쉽게 제작하여 컴퓨터에서는 2의 보수를 주로 사용한다.

---
### 프로세서 레지스터와 스택
컴퓨터 CPU내에서 데이터를 저장하는 장치를 프로세서 레지스터 또는 간략하게 레지스터라고 하며, CPU내부에 있는 레지스터들의 집합을 레지스터 세트라고 한다. 레지스터는 컴퓨터의 기억장치 중에서 속도가 가장 빨라 일반적으로 CPU에서 고속으로 계산하는 값을 저장하는 데 사용한다. 즉, ALU에서 처리된 결과 데이터를 임시 보관하고, 주기억장치로에서 읽어온 명령어와 데이터를 임시보관하기도 한다. CPU애서 사용되는 레지스터의 수와 용도는 프로세서 설계에 따라 달라진다. 특히 레지스터는 속도가 가장 빠른 만큼 가장 비싸 레지스터의 수를 제한해서 쓰고 있다. 레지스터를 용도 별로 나타내면 다음과 같다.

- `데이터 레지스터`: 정수 데이터 값을 저장할 수 있다.
- `주소 레지스터`: 기억장치 주소를 저장하여 기억장치 엑세스에 사용된다.
- `범용 레지스터`: 데이터와 주소를 모두 저장할 수 있다.
- `부동소수점 레지스터`: 부동소수점 데이터 값을 저장하기 위해 사용된다.
- `상수 레지스터`: 0이나 1등 고정된 데이터 값을 저장한다.
- `특수 레지스터`: 실행 중인 프로그램의 상태를 저장한다. 프로그램 카운터,상태 레지스터 등이 있다.
- `명령 레지스터`: 현재 실행 중인 명령어를 저장한다.
- `색인 레지스터`: 실행 중인 피연산자의 주소를 계산하는 데 사용한다.

CPU에 존재하는 레지스터는 두 가지로 분류된다. 첫 번째는 사용자에게 보이는 레지스터고, 또 하나는 제어 및 상태 레지스터다.

`1.사용자에게 보이는 레지스터`
사용자에게 보이는 레지스터는 어셈블리 프로그래밍을 하기 위하여 명칭과 용도를 알아야 하는 레지스터다. 여기서 어셈블리 프로그래밍이라는 것은 우리가 사용하는 프로그램을 컴퓨터가 사용하느 기계어로 쉽게 변경해주는 저급언어다. 따라서 어셈블리 프로그래머는 프로그램에서 사용되는 변수 데이터 등을 저장하기 위해 해당 레지스터를 알고 있어야 한다. 

- 일반 목적용 레지스터: 프로그래머가 여러 용도로 사용할 수 있고, 연산을 위한 모든 종류의 피연산자를 저장할 수 있는 레지스터다.
- 데이터 레지스터: 데이터 저장에만 사용할 수 있는 레지스터다. 대표적인 예로 누산기가 있다.
- 주소 레지스터: 특정 주소지정 방식을 위해 사용하는 레지스터다. 주소 지정 방식은 여러 가지다. 특히 레지스터 간접 주소지정 방식은 특정 레지스터의 내용이 유효주소를 표시한다. 따라서 유효주소를 저장하기 위한 레지스터가 필요한데, 이것이 주소 레지스터다.

-- `세그먼트 포인터`: 세그먼트의 시작 주소를 저장한다.

-- `인덱스 레지스터`: 변위 주소지정 방식에 해당하는 인덱스 주소지정에 사용한다.

-- `스택 포인터`: 스택 저장장치의 최상위 주소를 저장한다.

- 조건 코드: 사용자에게 보이는 레지스터에 저장된 데이터의 상태를 표시하는 데 사용된다. 연산의 결과에 따라 세트되는 비트들을 말한다.

-- `부호 비트`: 양수인지 음수인지를 표시한다.

-- `영 비트`: 해당 데이터가 0이라는 것을 표시한다.

-- `오버플로우 비트`: 연산의 결과 등에 오버플로우가 발생했다는 것을 표시한다.

---
`2.제어 및 상태 레지스터`
제어 및 상태 레지스터는 프로그램 실행 과정에서 CPU내부적으로 사용되는 대표 레지스터다.

-  프로그램 카운터: 주기억장치에 저장된 다음에 인출할 명령어의 주소를 가지고 있다.
-  명령어 레지스터: 가장 최근데 주기억장치인 RAM에서 인출할 명령어를 저장하고 있다.
- 기억장치 주소 레지스터: 엑세스할 기억장치의 주소가 저장되며 이 레지스터의 출력이 주소 버스와 직접 연결된다.
- 기억장치 버퍼 레지스터: 기억장치에 쓰일 데이터 혹은 가장 최근에 읽은 데이터가 저장된다. 이 레지스터는 데이터 버스와 직접 연결된다.
- 입출력 주소 레지스터(I/O AR: I/O Address Register): 입출력장치의 주소를 저장한다.
- 입출력 버퍼 레지스터(I/O BR: I/O Buffer Register): 입출력 모듈과 CPU사이에서 교환되는 데이터를 일시적으로 저장한다.
- 프로그램 상태 단어(program status word): 조건 코드와 마찬가지로 제어 및 상태 레지스터에서 저장된 데이터의 상태와 조건을 나타내기 위하여 추가된 조건 코드 비트다.
-- `부호 비트`: 해당 레지스터 내에서 데이터의 부호를 표시한다.
-- `영 비트`: 레지스터가 0이라는 것을 표시한다.
-- `올림수 비트`: 해당 레지스터에서 자리 올림이 발생했다는 것을 표시한다.
-- `동등 비트`: 비교 대상과 해당 레지스터가 동일한 상태임을 표시한다.
-- `오버플로우 비트`: 해당 레지스터의 오버플로우 상태를 표시한다.
-- `인터럽트 가능/불가능 비트`: 인터럽트 가능 여부를 표시한다.
-- `디렉션 비트`: 문자열 조작에서 참일 경우 주소 레지스터 값이 자동으로 감소하고, 거짓일 경우 자동으로 증가한다.
-- `트랩 비트`: 참일 경우 한 명령을 실행할 때마다 인터럽트가 발생한다. 디버깅에 사용된다.
-- `보조 올림수 비트`: 연산 결과 하위 니블에서 비트 범위를 넘었을 때 참이 된다. 2진화 10진법연산에 사용되는 비트다.
-- `패리티 비트`: 연산 결과에서 1의 값을 갖는 비트의 수가 짝수일 경우 참이 된다.
-- `슈퍼바이저 비트`: CPU가 슈퍼바이저 모드 혹은 사용자 모드에서 실행 중인지를 나타내는 비트다. 특권 명령어의 실행 및 기억장치의 특정 부분의 엑세스가 이 모드에서만 가능하다는 것을 나타낸다.

---
### 스택 저장장치
스택(stack)은 CPU내부의 레지스터 집합에 존재하는 저장장치이며, 레지스터와는 다른 특징이 있다. 우선 데이터가 순차적으로 저장되며, 요소의 개수와 스택의 길이는 가변적이다. 그리고 한번에 하나의 요소에만 엑세스 가능하다. 결과적으로 데이터 접근 방법은 '나중 입력 먼저 출력' 의 특징을 갖는다.

---
### 제어장치
제어장치는 주기억장치에 저장된 명령을 지정된 순서에 맞게 하나씩 가져와서 해독하고 그 명령이 지시하는 연산이 실행되도록 해당되는 장치에 제어신호를 보낸다. 즉, 제어장치는 명령어를 해독하는 기능과 제어신호를 해당장치에 전달하는 역할을 한다. 주기억장치에 저장되어 있는 명령어의 구조는 일반적으로 연산 코드 필드와 기억장치 주소 번지 필드 등, 두 개의 필드로 구성된다. 연산 코드는 수행되어야 할 연산이 지정되어 있는 필드이고 나머지 기억장치의 주소는 해당 연산을 수행할 때 데이터가 저장되어 있는 주소를 나타낸다. 제어장치는 주기억장치에 저장되어 있는 명령어를 차례대로 하나씩 꺼내기 위한 레지스터와 명령 코드, 주소번지 해독기가 필요하며, 정해진 순서대로 프로그램이 진행되도록 프로그램 카운터도 필요하다.



 





























